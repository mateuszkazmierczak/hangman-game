<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="main">
        <div id="title">
        </div>
        
        <div id="content">
            <div id="hangmanImg">
            </div>
            <div id="keys">
            </div>
        </div>
    </div>

<script>

const keystring = "abcdefghijklmnopqrstuvwxyz";
const keyArray = "abcdefghijklmnopqrstuvwxyz".split('');
function returnRandomPassword(array)
{
    let index = Math.floor(Math.random() * array.length);
    return array[index];
}
var password ="";
const main = document.querySelector("#main");
function passwordButtons(){
    const title = document.querySelector("#title");
    title.innerHTML="";
    for(let i = 0; i < 2;i++)
    {
    let btn = document.createElement("div");
    btn.setAttribute("id","btn");
    title.appendChild(btn);
    }
    const startButtons = title.querySelectorAll("#btn");
    startButtons[0].innerText = "Random";
    startButtons[1].innerText = "Your own";
    startButtons[0].addEventListener("click", function()
{
    password = returnRandomPassword(keyArray);
    startGame(password);
});
startButtons[1].addEventListener("click", function()
{
    password = prompt("Type your password");
    if(password != null && password != "")
    {
    startGame(password);
    }
    passwordButtons();
})
}
passwordButtons();
function startGame(password){
    function renderImage()
    {
        const hangmanImg = document.querySelector("#hangmanImg");
        const firstImage = document.createElement('img');
        firstImage.setAttribute("id","hangman");
        firstImage.setAttribute("src","./img/s0.jpg");
        console.log(firstImage);
        hangmanImg.appendChild(firstImage); 
    }
    renderImage();
    //var wordAPI = 'https://api.wordnik.com:80/v4/words.json/randomWord?hasDictionaryDef=true&includePartOfSpeech=noun&minCorpusCount=8000&maxCorpusCount=-1&minDictionaryCount=3&maxDictionaryCount=-1&minLength=6&maxLength=12&api_key=a2a73e7b926c924fad7001ca3111acd55af2ffabf50eb4ae5';

    const keysContainer = document.querySelector("#keys");

    for(let i=0;i<keystring.length;i++)
    {
        keysContainer.innerHTML +='<div class="letter">'+keyArray[i]+"</div>";
        if((i+1) % 6 ==0)
        {
            keysContainer.innerHTML +="<br />";
        }
    }
    const buttons = document.querySelectorAll('.letter');
    buttons.forEach(element => {
        element.addEventListener('click', event => {
        if(!element.classList.contains("clicked"))
        {
            checkLetter(element,password);
        }
    })
});

function checkLetter(element,password)
{
    for(i=0;i<password.length;i++)
    {
        if(password[i] == element.innerText)
        {
            element.classList.add("exist");
            element.classList.add("clicked");
            return;
        }
    }
    element.classList.add("notexist");
    element.classList.add("clicked");
    wrongProgress();
}

const title = document.querySelector("#title");
//var password = prompt("Enter the password");
const image = document.querySelector('#hangman')
var progress = 1;
const passChoose = document.querySelectorAll('#title>#btn')
passChoose[0].addEventListener("click", function()
{
    title.innerHTML = returnRandomPassword(keyArray);
})


//console.log(returnRandomPassword(keyArray));
function wrongProgress()
{
    console.log(image);

    image.src="./img/s"+progress+".jpg";
    progress++;
}
}
//startGame();

</script>
</body>
</html>